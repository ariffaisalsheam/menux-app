# Menu.X Deployment Guide

## Deploying Backend to Render.com

### Prerequisites
- GitHub account connected to Render.com
- Supabase database credentials

### Step 1: Push Code to GitHub
Make sure your code is pushed to your GitHub repository.

### Step 2: Create Web Service on Render.com

1. Go to [Render.com](https://render.com) and sign in
2. Click "New +" and select "Web Service"
3. Connect your GitHub repository
4. Configure the service:

**Basic Settings:**
- Name: `menu-x-backend`
- Environment: `Java`
- Region: Choose closest to your users
- Branch: `main` (or your default branch)

**Build & Deploy:**
- Build Command: `cd backend && ./mvnw clean package -DskipTests`
- Start Command: `cd backend && java -jar target/menu-x-backend-1.0.0.jar`

**Environment Variables:**
Set these in the Render dashboard:

```
SPRING_PROFILES_ACTIVE=prod
SERVER_PORT=8080
DB_USERNAME=postgres
DB_PASSWORD=[Your Supabase Password]
JWT_SECRET=[Auto-generated by Render]
GEMINI_API_KEY=AIzaSyAuWkC4FLccs0EZs0prOufuBk2ojWaCb2E
CORS_ALLOWED_ORIGINS=https://menu-x-frontend.onrender.com,http://localhost:3000
QR_BASE_URL=https://menu-x-frontend.onrender.com/menu
LOG_LEVEL=INFO
SECURITY_LOG_LEVEL=WARN
SQL_LOG_LEVEL=WARN
```

### Step 3: Deploy
1. Click "Create Web Service"
2. Render will automatically build and deploy your application
3. Your backend will be available at: `https://menu-x-backend.onrender.com`

### Step 4: Update Frontend Configuration
Update your frontend to point to the deployed backend URL.

## Important Notes

1. **Free Tier Limitations:**
   - Service spins down after 15 minutes of inactivity
   - Cold starts may take 30+ seconds
   - 750 hours/month limit

2. **Database:**
   - Using Supabase PostgreSQL
   - Make sure to set the correct DB_PASSWORD

3. **CORS:**
   - Backend is configured to allow requests from frontend
   - Update CORS_ALLOWED_ORIGINS if frontend URL changes

4. **Environment Variables:**
   - Never commit sensitive data like passwords
   - Use Render's environment variable feature

## Troubleshooting

1. **Build Fails:**
   - Check Java version (should be 17)
   - Verify Maven wrapper permissions

2. **Application Won't Start:**
   - Check environment variables
   - Verify database connection
   - Check logs in Render dashboard

3. **CORS Issues:**
   - Verify CORS_ALLOWED_ORIGINS includes frontend URL
   - Check frontend is making requests to correct backend URL
